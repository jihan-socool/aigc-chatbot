# ============================================================================
# Tencent CVM Production Environment Configuration
# ============================================================================
# 
# This template contains all environment variables required for deploying
# the AI Chat application to Tencent Cloud Virtual Machine (CVM) in production.
# 
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp deploy/.env.tencent.production.example .env.production
# 2. Fill in all placeholder values marked with <...>
# 3. Secure the file: chmod 600 .env.production
# 4. Never commit .env.production to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------

# Node environment (must be "production" for production deployments)
NODE_ENV=production

# Application port (default: 3000)
PORT=3000

# Public URL where the application will be accessible
NEXTAUTH_URL=https://<your-domain.com>

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database?sslmode=require
# Example: postgresql://myuser:mypass@postgres.example.com:5432/chatdb?sslmode=require
# Tencent Cloud Database for PostgreSQL endpoint format:
# postgresql://<username>:<password>@<instance-id>.pgsql.tencentcdb.com:5432/<database>
POSTGRES_URL=postgresql://<username>:<password>@<host>:<port>/<database>?sslmode=require

# ----------------------------------------------------------------------------
# Authentication & Security
# ----------------------------------------------------------------------------

# NextAuth secret for session encryption (generate with: openssl rand -base64 32)
# REQUIRED: Generate a unique random secret for production
AUTH_SECRET=<generate-with-openssl-rand-base64-32>

# NextAuth secret (alternative name, some configurations require both)
NEXTAUTH_SECRET=<same-as-AUTH_SECRET>

# ----------------------------------------------------------------------------
# AI Provider Configuration (OpenAI-Compatible)
# ----------------------------------------------------------------------------

# OpenAI API key or compatible provider API key
# For Tencent Cloud deployments, this might be your gateway API key
OPENAI_API_KEY=<your-openai-api-key>

# Base URL for OpenAI-compatible API endpoint
# Examples:
#   - OpenAI: https://api.openai.com/v1
#   - Self-hosted gateway: https://api.your-gateway.com/v1
#   - Tencent internal endpoint: https://internal-ai-gateway.tencentcloud.com/v1
OPENAI_API_URL=https://api.openai.com/v1

# Model identifiers for different use cases
# Main chat model (default: gpt-4o)
OPENAI_CHAT_MODEL=gpt-4o

# Reasoning model for complex thinking (default: gpt-4o-mini)
OPENAI_REASONING_MODEL=gpt-4o-mini

# Model for generating chat titles (default: gpt-4o-mini)
OPENAI_TITLE_MODEL=gpt-4o-mini

# Model for artifact generation (default: gpt-4o)
OPENAI_ARTIFACT_MODEL=gpt-4o

# Display names shown in the UI (optional)
NEXT_PUBLIC_OPENAI_CHAT_MODEL_DISPLAY_NAME=GPT-4o
NEXT_PUBLIC_OPENAI_REASONING_MODEL_DISPLAY_NAME=GPT-4o Mini

# ----------------------------------------------------------------------------
# Optional: Anthropic / Claude Configuration
# ----------------------------------------------------------------------------

# Anthropic API key (if using Claude models)
ANTHROPIC_API_KEY=

# Base URL for Anthropic API (default: https://api.anthropic.com)
ANTHROPIC_API_URL=https://api.anthropic.com

# Preferred Claude model identifier (e.g., claude-3-opus-20240229)
ANTHROPIC_CHAT_MODEL=claude-3-opus-20240229

# ----------------------------------------------------------------------------
# Optional: AI Gateway (Vercel AI Gateway or self-hosted)
# ----------------------------------------------------------------------------

# AI Gateway API key for routing and monitoring
# Required for non-Vercel deployments if using AI Gateway
# Leave empty if not using an AI gateway
AI_GATEWAY_API_KEY=

# ----------------------------------------------------------------------------
# Optional: Redis Configuration
# ----------------------------------------------------------------------------

# Redis URL for caching and resumable streaming
# Format: redis://username:password@host:port
# Tencent Cloud Redis format: redis://:<password>@<instance-id>.redis.tencentcdb.com:6379
# Leave empty if not using Redis
REDIS_URL=

# ----------------------------------------------------------------------------
# Optional: Blob Storage (Vercel Blob or Compatible)
# ----------------------------------------------------------------------------

# Blob storage read/write token for file uploads
# Required if using file upload functionality
# For Tencent Cloud, configure COS (Cloud Object Storage) integration
# Leave empty if file uploads are disabled
BLOB_READ_WRITE_TOKEN=

# ----------------------------------------------------------------------------
# SSH Deployment Configuration
# ----------------------------------------------------------------------------

# Target CVM instance IP address or hostname
SSH_HOST=<your-cvm-ip-or-hostname>

# SSH port (default: 22)
SSH_PORT=22

# SSH username for deployment (e.g., ubuntu, root)
SSH_USER=<deployment-user>

# SSH private key (for CI/CD, store as secret)
# In CI/CD, this should be stored as a secret variable
# For manual deployment, use SSH key files instead
# SSH_PRIVATE_KEY=<base64-encoded-private-key>

# Remote deployment directory on CVM
DEPLOY_PATH=/opt/chatapp

# Application service name (for systemd or docker-compose)
SERVICE_NAME=chatapp

# ----------------------------------------------------------------------------
# CI/CD Variables (GitHub Actions / GitLab CI / Jenkins)
# ----------------------------------------------------------------------------

# Git branch for production deployments
DEPLOY_BRANCH=main

# Enable automatic deployments on push
AUTO_DEPLOY=true

# Deployment environment tag
ENVIRONMENT=production

# Health check URL (for post-deployment verification)
HEALTH_CHECK_URL=https://<your-domain.com>/api/health

# ----------------------------------------------------------------------------
# Monitoring & Observability (Optional)
# ----------------------------------------------------------------------------

# Enable OpenTelemetry tracing
OTEL_ENABLED=false

# OTEL endpoint (if using distributed tracing)
# OTEL_EXPORTER_OTLP_ENDPOINT=https://your-otel-collector:4318

# ----------------------------------------------------------------------------
# Tencent Cloud Specific Configuration
# ----------------------------------------------------------------------------

# Tencent Cloud Secret ID (for cloud API access)
TENCENT_SECRET_ID=<your-secret-id>

# Tencent Cloud Secret Key (for cloud API access)
TENCENT_SECRET_KEY=<your-secret-key>

# Tencent Cloud region (e.g., ap-guangzhou, ap-shanghai, ap-beijing)
TENCENT_REGION=ap-guangzhou

# ----------------------------------------------------------------------------
# Additional Production Settings
# ----------------------------------------------------------------------------

# Maximum request body size (for file uploads)
MAX_REQUEST_SIZE=10mb

# Rate limiting (requests per minute per IP)
RATE_LIMIT_RPM=100

# Session cookie settings
SESSION_MAX_AGE=2592000

# Enable security headers
ENABLE_SECURITY_HEADERS=true

# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=https://<your-domain.com>

# ----------------------------------------------------------------------------
# Feature Flags (Optional)
# ----------------------------------------------------------------------------

# Enable file upload feature
ENABLE_FILE_UPLOAD=true

# Enable chat history export
ENABLE_EXPORT=true

# Enable user analytics
ENABLE_ANALYTICS=false

# Maximum chat history per user
MAX_CHAT_HISTORY=100

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
